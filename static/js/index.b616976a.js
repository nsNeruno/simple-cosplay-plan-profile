(()=>{"use strict";var e,t,r,a,s={389(e,t,r){var a=r(848),s=r(540),n=r(338),o=r(342);let l=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[r,n]=(0,s.useState)([]),[i,c]=(0,s.useState)(null),[d,u]=(0,s.useState)([]),[m,g]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null),b=(0,s.useCallback)(async()=>{g(!0),v(null);try{let e=await (0,o.GX)();n(e)}catch(e){v(e instanceof Error?e.message:"Failed to load groups"),console.error("Failed to load groups:",e)}finally{g(!1)}},[]),f=(0,s.useCallback)(async e=>{x(!0),v(null);try{let t=await (0,o.getImagesByGroup)(e);u(t)}catch(e){v(e instanceof Error?e.message:"Failed to load images"),console.error("Failed to load images:",e)}finally{x(!1)}},[]);(0,s.useEffect)(()=>{b()},[b]),(0,s.useEffect)(()=>{null!==i?f(i):u([])},[i,f]);let w=(0,s.useCallback)(e=>{c(e)},[]),j=(0,s.useCallback)(async e=>{v(null);try{let t=await (0,o.wj)(e);await b(),c(t)}catch(e){throw v(e instanceof Error?e.message:"Failed to create group"),e}},[b]),y=(0,s.useCallback)(async(e,t)=>{v(null);try{await (0,o.Ic)(e,t),await b()}catch(e){throw v(e instanceof Error?e.message:"Failed to rename group"),e}},[b]),k=(0,s.useCallback)(async e=>{v(null);try{await (0,o.Ni)(e),await b(),i===e&&c(null)}catch(e){throw v(e instanceof Error?e.message:"Failed to delete group"),e}},[b,i]),N=(0,s.useCallback)(async(e,t,r)=>{v(null);try{await (0,o.hk)(e,t,r),await f(e)}catch(e){throw v(e instanceof Error?e.message:"Failed to add image"),e}},[f]),S=(0,s.useCallback)(async(e,t)=>{v(null);try{await (0,o.O)(e,t),null!==i&&await f(i)}catch(e){throw v(e instanceof Error?e.message:"Failed to rename image"),e}},[i,f]),C=(0,s.useCallback)(async e=>{v(null);try{await (0,o.vS)(e),null!==i&&await f(i)}catch(e){throw v(e instanceof Error?e.message:"Failed to delete image"),e}},[i,f]);return(0,a.jsx)(l.Provider,{value:{groups:r,selectedGroupId:i,images:d,isLoadingGroups:m,isLoadingImages:h,error:p,selectGroup:w,createNewGroup:j,renameExistingGroup:y,deleteExistingGroup:k,addImageToGroup:N,renameExistingImage:S,deleteExistingImage:C},children:t})},c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useImageGallery must be used within ImageGalleryProvider");return e},d=e=>{let{images:t,isReversed:r}=e;if(0===t.length)return null;if(1===t.length)return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(u,{image:t[0]})});let s=t.length,n=2===s?55:3===s?42:4===s?32:25,o=(100-n*s)/(s-1),l=2===s?15:3===s?20:4===s?23:25;return(0,a.jsx)("div",{className:"relative w-full",style:{height:"300px"},children:t.map((e,s)=>(0,a.jsx)(m,{image:e,index:s,totalImages:t.length,isReversed:r,baseWidth:n,offsetPerImage:o,triangleOffsetPercent:l},e.id))})},u=e=>{let{image:t}=e,[r,n]=(0,s.useState)("");return(0,s.useEffect)(()=>{let e=URL.createObjectURL(t.blob);return n(e),()=>{URL.revokeObjectURL(e)}},[t.blob]),(0,a.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-black/20 border border-dark-border",style:{height:"300px"},children:[(0,a.jsx)("img",{src:r,alt:t.name,className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-3",children:(0,a.jsx)("p",{className:"text-body-medium text-white truncate",title:t.name,children:t.name})})]})},m=e=>{let t,{image:r,index:n,totalImages:o,isReversed:l,baseWidth:i,offsetPerImage:c,triangleOffsetPercent:d}=e,[u,m]=(0,s.useState)(""),[g,h]=(0,s.useState)(!1),[x,p]=(0,s.useState)({x:50,y:50}),[v,b]=(0,s.useState)({x:0,y:0}),[f,w]=(0,s.useState)(1),j=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=URL.createObjectURL(r.blob);return m(e),()=>{URL.revokeObjectURL(e)}},[r.blob]);let y=e=>{if(g&&j.current){let t=j.current.getBoundingClientRect();if(t.width<=0||t.height<=0)return;let r=e.clientX-v.x,a=e.clientY-v.y,s=-(100*(r/t.width)),n=-(100*(a/t.height));p(e=>({x:Math.max(0,Math.min(100,e.x+s)),y:Math.max(0,Math.min(100,e.y+n))})),b({x:e.clientX,y:e.clientY})}},k=()=>{h(!1)};return(0,s.useEffect)(()=>{if(g)return window.addEventListener("mousemove",y),window.addEventListener("mouseup",k),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",k)}},[g]),n!==o-1&&(t=l?`polygon(
        0 0,
        calc(100% - ${d}%) 0,
        100% 100%,
        0 100%
      )`:`polygon(
        0 0,
        100% 0,
        calc(100% - ${d}%) 100%,
        0 100%
      )`),(0,a.jsxs)("div",{ref:j,className:"absolute top-0 h-full group/preview-image",style:{left:`${i*n+c*n}%`,width:`${i}%`,zIndex:o-n,clipPath:t},onWheel:e=>{if(e.preventDefault(),e.stopPropagation(),"number"!=typeof e.deltaY||isNaN(e.deltaY))return;let t=e.deltaY>0?-.1:.1;w(e=>Math.max(.5,Math.min(3,e+t)))},children:[(0,a.jsx)("img",{src:u,alt:r.name,className:"object-cover",style:{width:`${100*f}%`,height:`${100*f}%`,objectPosition:`${x.x}% ${x.y}%`,cursor:g?"grabbing":"grab",transition:g?"none":"width 0.1s ease-out, height 0.1s ease-out"},onMouseDown:e=>{e.preventDefault(),h(!0),b({x:e.clientX,y:e.clientY})},onDoubleClick:()=>{p({x:50,y:50}),w(1)},draggable:!1}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 opacity-0 group-hover/preview-image:opacity-100 transition-opacity duration-200 pointer-events-none",style:{zIndex:9999},children:(0,a.jsx)("div",{className:"bg-gradient-to-t from-black/95 via-black/70 to-transparent px-4 py-3 pb-4",children:(0,a.jsx)("p",{className:"text-sm text-white text-center truncate",style:{textShadow:"0 2px 4px rgba(0, 0, 0, 0.8), 0 0 8px rgba(0, 0, 0, 0.6)"},title:r.name,children:r.name})})})]})},g=e=>{let{isOpen:t,onClose:r,groupName:n,images:o}=e;if((0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&r()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,r]),(0,s.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),!t)return null;let l=[];for(let e=0;e<o.length;e+=5)l.push(o.slice(e,e+5));return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:r,children:(0,a.jsxs)("div",{className:"bg-dark-surface rounded-lg shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-dark-surface border-b border-dark-border px-6 py-4 flex items-center justify-between z-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-headline-large",children:n}),(0,a.jsxs)("p",{className:"text-body-medium mt-1",children:[o.length," ",1===o.length?"image":"images"]})]}),(0,a.jsx)("button",{onClick:r,className:"btn-text p-2 hover:bg-white/10 rounded-lg","aria-label":"Close preview",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"p-6 space-y-6",children:0===o.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsx)("h3",{className:"text-headline-small mb-2",children:"No images in this group"}),(0,a.jsx)("p",{className:"text-body-medium",children:"Add some images to see them in preview"})]}):l.map((e,t)=>(0,a.jsx)(d,{images:e,isReversed:t%2==1},t))})]})})},h=e=>{let{group:t,isSelected:r,onSelect:n,onRename:o,onPreview:l,onDelete:i}=e,[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)(t.name),g=async()=>{let e=u.trim();if(!e)return void alert("Please enter a group name");if(e===t.name)return void d(!1);try{await o(e),d(!1)}catch(e){alert("Failed to rename group: "+(e instanceof Error?e.message:String(e))),m(t.name)}},h=()=>{m(t.name),d(!1)};return(0,a.jsxs)("div",{className:`
        card-standard transition-all duration-200 relative group/card
        ${c?"":"cursor-pointer"}
        ${r?"ring-2 ring-blue-500 bg-blue-600/10 shadow-lg shadow-blue-500/20":"hover:shadow-lg"}
      `,onClick:c?void 0:n,children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-600/20 rounded-lg mb-3",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),c?(0,a.jsxs)("div",{className:"mb-3 space-y-2",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),onKeyPress:e=>{"Enter"===e.key&&g(),"Escape"===e.key&&h()},className:"input-base text-sm",autoFocus:!0,onClick:e=>e.stopPropagation()}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:g,className:"btn-success flex-1 px-2 py-1 text-xs",children:"Save"}),(0,a.jsx)("button",{onClick:h,className:"btn-outlined flex-1 px-2 py-1 text-xs",children:"Cancel"})]})]}):(0,a.jsx)("h3",{className:"text-title-large mb-1 truncate",title:t.name,children:t.name}),(0,a.jsxs)("p",{className:"text-body-medium",children:["Created ",new Date(t.createdAt).toLocaleDateString()]}),r&&!c&&(0,a.jsx)("div",{className:"absolute top-3 right-3 bg-blue-600 text-white px-2 py-1 rounded text-xs font-medium",children:"Selected"}),!c&&(0,a.jsxs)("div",{className:"absolute bottom-3 right-3 flex gap-2 opacity-0 group-hover/card:opacity-100 transition-opacity",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1.5 text-xs rounded-lg transition-colors",children:"Preview"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 text-xs rounded-lg transition-colors",children:"Rename"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"btn-danger px-3 py-1.5 text-xs",children:"Delete"})]})]})},x=()=>{let{groups:e,selectedGroupId:t,selectGroup:n,createNewGroup:o,renameExistingGroup:l,deleteExistingGroup:i}=(()=>{let{groups:e,selectedGroupId:t,isLoadingGroups:r,selectGroup:a,createNewGroup:s,renameExistingGroup:n,deleteExistingGroup:o}=c();return{groups:e,selectedGroupId:t,isLoadingGroups:r,selectGroup:a,createNewGroup:s,renameExistingGroup:n,deleteExistingGroup:o}})(),[d,u]=(0,s.useState)(!0),[m,x]=(0,s.useState)(""),[p,v]=(0,s.useState)(!1),[b,f]=(0,s.useState)(null),[w,j]=(0,s.useState)([]),y=async()=>{let e=m.trim();if(!e)return void alert("Please enter a group name");try{await o(e),x(""),v(!1)}catch(e){alert("Failed to create group: "+(e instanceof Error?e.message:String(e)))}},k=async(e,t)=>{if(window.confirm(`Are you sure you want to delete "${t}" and all its images?`))try{await i(e)}catch(e){alert("Failed to delete group: "+(e instanceof Error?e.message:String(e)))}},N=async e=>{try{let{getImagesByGroup:t}=await Promise.resolve().then(r.bind(r,342)),a=await t(e);j(a),f(e)}catch(e){alert("Failed to load images: "+(e instanceof Error?e.message:String(e)))}},S=e.find(e=>e.id===b);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-display-small",children:"Image Groups"}),(0,a.jsxs)("p",{className:"text-body-medium mt-1",children:[e.length," ",1===e.length?"group":"groups"," • Organize your images into collections"]})]}),(0,a.jsx)("button",{onClick:()=>u(!d),className:"btn-text ml-4","aria-label":d?"Collapse groups":"Expand groups",children:(0,a.jsx)("svg",{className:`w-6 h-6 transition-transform duration-200 ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),d&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"card-standard",children:p?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&y(),placeholder:"Enter group name",className:"input-base",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:y,className:"btn-success flex-1",children:"Create"}),(0,a.jsx)("button",{onClick:()=>{v(!1),x("")},className:"btn-outlined flex-1",children:"Cancel"})]})]}):(0,a.jsx)("button",{onClick:()=>v(!0),className:"btn-filled w-full",children:"+ Create New Group"})}),0===e.length?(0,a.jsxs)("div",{className:"card-spacious text-center",children:[(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,a.jsx)("h3",{className:"text-headline-small mb-2",children:"No groups yet"}),(0,a.jsx)("p",{className:"text-body-medium",children:"Create your first group to start organizing images"})]}):(0,a.jsx)("div",{className:"grid-responsive",children:e.map(e=>(0,a.jsx)(h,{group:e,isSelected:t===e.id,onSelect:()=>n(e.id),onRename:t=>l(e.id,t),onPreview:()=>N(e.id),onDelete:()=>k(e.id,e.name)},e.id))})]})]}),S&&(0,a.jsx)(g,{isOpen:null!==b,onClose:()=>{f(null),j([])},groupName:S.name,images:w})]})},p=e=>{let{image:t,onRename:r,onDelete:n}=e,[o,l]=(0,s.useState)(""),[i,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(t.name);(0,s.useEffect)(()=>{let e=URL.createObjectURL(t.blob);return l(e),()=>{URL.revokeObjectURL(e)}},[t.blob]);let m=async()=>{let e=d.trim();if(!e)return void alert("Please enter a filename");if(e===t.name)return void c(!1);try{await r(t.id,e),c(!1)}catch(e){alert("Failed to rename image: "+(e instanceof Error?e.message:String(e))),u(t.name)}},g=()=>{u(t.name),c(!1)};return(0,a.jsxs)("div",{className:"card-surface overflow-hidden group/image relative",children:[(0,a.jsx)("div",{className:"aspect-square overflow-hidden bg-black/20",children:(0,a.jsx)("img",{src:o,alt:t.name,className:"w-full h-full object-cover transition-transform duration-200 group-hover/image:scale-105"})}),(0,a.jsx)("div",{className:"p-3",children:i?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m(),"Escape"===e.key&&g()},className:"input-base text-sm",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:m,className:"btn-success flex-1 px-2 py-1 text-xs",children:"Save"}),(0,a.jsx)("button",{onClick:g,className:"btn-outlined flex-1 px-2 py-1 text-xs",children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-body-medium truncate",title:t.name,children:t.name}),(0,a.jsx)("p",{className:"text-body-medium text-gray-500 text-xs mt-1",children:new Date(t.createdAt).toLocaleDateString()})]})}),!i&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover/image:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[(0,a.jsxs)("button",{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Rename"]}),(0,a.jsxs)("button",{onClick:()=>n(t.id,t.name),className:"btn-danger",children:[(0,a.jsx)("svg",{className:"w-5 h-5 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})},v=()=>{let{images:e,selectedGroupId:t,addImageToGroup:r,renameExistingImage:n,deleteExistingImage:o}=(()=>{let{images:e,selectedGroupId:t,isLoadingImages:r,addImageToGroup:a,renameExistingImage:s,deleteExistingImage:n}=c();return{images:e,selectedGroupId:t,isLoadingImages:r,addImageToGroup:a,renameExistingImage:s,deleteExistingImage:n}})(),[l,i]=(0,s.useState)(!1),[d,u]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1),h=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{var r;if(!t)return;let a=null==(r=e.clipboardData)?void 0:r.items;if(a){for(let e=0;e<a.length;e++)if(-1!==a[e].type.indexOf("image")){let t=a[e].getAsFile();t&&x(t,`pasted-${Date.now()}.png`)}}};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[t]);let x=async(e,a)=>{if(!t)return void alert("Please select a group first");if(!e.type.startsWith("image/"))return void alert("Please select a valid image file");try{let s=a||(e instanceof File?e.name:"image.jpg");await r(t,s,e)}catch(e){alert("Failed to add image: "+(e instanceof Error?e.message:String(e)))}},v=async()=>{if(!d.trim())return void alert("Please enter a URL");if(!t)return void alert("Please select a group first");g(!0);try{let e=await fetch(d);if(!e.ok)throw Error("Failed to download image");let t=await e.blob();if(!t.type.startsWith("image/"))throw Error("URL does not point to an image");let r=d.split("/"),a=r[r.length-1]||`downloaded-${Date.now()}.jpg`;await x(t,a),u("")}catch(e){alert("Failed to download image: "+(e instanceof Error?e.message:String(e)))}finally{g(!1)}},b=async(e,t)=>{if(window.confirm(`Delete "${t}"?`))try{await o(e)}catch(e){alert("Failed to delete image: "+(e instanceof Error?e.message:String(e)))}};return t?(0,a.jsxs)("section",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-display-small",children:"Images"}),(0,a.jsxs)("p",{className:"text-body-medium mt-1",children:[e.length," ",1===e.length?"image":"images"," in this group"]})]}),(0,a.jsxs)("div",{className:"card-standard mb-6 space-y-4",children:[(0,a.jsx)("h3",{className:"text-title-large mb-4",children:"Add Images"}),(0,a.jsx)("input",{ref:h,type:"file",accept:"image/*",multiple:!0,onChange:e=>{let t=e.target.files;t&&0!==t.length&&(Array.from(t).forEach(e=>{x(e)}),e.target.value="")},className:"hidden"}),(0,a.jsxs)("button",{onClick:()=>{var e;return null==(e=h.current)?void 0:e.click()},className:"btn-filled w-full",children:[(0,a.jsx)("svg",{className:"w-5 h-5 inline-block mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Browse Files"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{type:"url",value:d,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&v(),placeholder:"Enter image URL",className:"input-base flex-1",disabled:m}),(0,a.jsx)("button",{onClick:v,disabled:m,className:"btn-success",children:m?"Downloading...":"Download"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2 card-compact bg-dark-hover",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{className:"text-body-medium",children:["You can also ",(0,a.jsx)("strong",{children:"drag & drop"})," images anywhere below or"," ",(0,a.jsx)("strong",{children:"paste from clipboard"})," (Ctrl+V / Cmd+V)"]})]})]}),(0,a.jsx)("div",{className:`
          min-h-[400px] rounded-lg border-2 border-dashed transition-all duration-200
          ${l?"border-blue-500 bg-blue-600/10":"border-dark-border bg-dark-surface/50"}
        `,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),i(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),i(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{var t;e.preventDefault(),e.stopPropagation(),i(!1);let r=null==(t=e.dataTransfer)?void 0:t.files;r&&0!==r.length&&Array.from(r).forEach(e=>{x(e)})},children:l?(0,a.jsxs)("div",{className:"h-[400px] flex flex-col items-center justify-center",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-blue-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),(0,a.jsx)("p",{className:"text-headline-small text-blue-400",children:"Drop images here"})]}):0===e.length?(0,a.jsxs)("div",{className:"h-[400px] flex flex-col items-center justify-center p-8 text-center",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsx)("h3",{className:"text-headline-small mb-2",children:"No images yet"}),(0,a.jsx)("p",{className:"text-body-medium max-w-md",children:"Add images using the buttons above, drag & drop, paste from clipboard, or download from a URL"})]}):(0,a.jsx)("div",{className:"p-6 grid-images",children:e.map(e=>(0,a.jsx)(p,{image:e,onRename:n,onDelete:b},e.id))})})]}):(0,a.jsxs)("section",{className:"text-center card-spacious",children:[(0,a.jsx)("svg",{className:"w-20 h-20 mx-auto mb-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,a.jsx)("h3",{className:"text-headline-small mb-2",children:"No group selected"}),(0,a.jsx)("p",{className:"text-body-medium",children:"Select or create a group above to start adding images"})]})},b=document.getElementById("root");if(!b)throw Error("Failed to find the root element");n.createRoot(b).render((0,a.jsx)(s.StrictMode,{children:(0,a.jsx)(()=>(0,a.jsx)(i,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-dark-bg flex flex-col",children:[(0,a.jsx)("header",{className:"bg-dark-surface border-b border-dark-border shadow-lg",children:(0,a.jsxs)("div",{className:"container-centered py-4",children:[(0,a.jsx)("h1",{className:"text-headline-large",children:"Image Gallery"}),(0,a.jsx)("p",{className:"text-body-medium mt-1",children:"Offline-first PWA • TypeScript • IndexedDB • React Context"})]})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"container-centered section-spacing",children:[(0,a.jsx)(x,{}),(0,a.jsx)(v,{})]})})]})}),{})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered successfully:",e)}).catch(e=>{console.log("Service Worker registration failed:",e)})})},342(e,t,r){r.d(t,{GX:()=>n,Ic:()=>o,Ni:()=>l,O:()=>d,getImagesByGroup:()=>c,hk:()=>i,vS:()=>u,wj:()=>s});let a=()=>new Promise((e,t)=>{let r=indexedDB.open("ImageGalleryDB",1);r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains("groups")||t.createObjectStore("groups",{keyPath:"id",autoIncrement:!0}).createIndex("name","name",{unique:!1}),t.objectStoreNames.contains("images")||t.createObjectStore("images",{keyPath:"id",autoIncrement:!0}).createIndex("groupId","groupId",{unique:!1})},r.onsuccess=t=>{e(t.target.result)},r.onerror=e=>{let r=e.target.error;t(Error(`Database failed to open: ${(null==r?void 0:r.message)||"Unknown error"}`))}}),s=async e=>{let t=await a();return new Promise((r,a)=>{let s=t.transaction(["groups"],"readwrite").objectStore("groups"),n={name:e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},o=s.add(n);o.onsuccess=()=>{r(o.result)},o.onerror=()=>{var e;a(Error(`Failed to create group: ${(null==(e=o.error)?void 0:e.message)||"Unknown error"}`))}})},n=async()=>{let e=await a();return new Promise((t,r)=>{let a=e.transaction(["groups"],"readonly").objectStore("groups").getAll();a.onsuccess=()=>{t(a.result)},a.onerror=()=>{var e;r(Error(`Failed to get groups: ${(null==(e=a.error)?void 0:e.message)||"Unknown error"}`))}})},o=async(e,t)=>{let r=await a();return new Promise((a,s)=>{let n=r.transaction(["groups"],"readwrite").objectStore("groups"),o=n.get(e);o.onsuccess=()=>{let r=o.result;if(!r)return void s(Error(`Group with ID ${e} not found`));r.name=t,r.updatedAt=new Date().toISOString();let l=n.put(r);l.onsuccess=()=>{a()},l.onerror=()=>{var e;s(Error(`Failed to rename group: ${(null==(e=l.error)?void 0:e.message)||"Unknown error"}`))}},o.onerror=()=>{var e;s(Error(`Failed to get group: ${(null==(e=o.error)?void 0:e.message)||"Unknown error"}`))}})},l=async e=>{let t=await a();return await m(e),new Promise((r,a)=>{let s=t.transaction(["groups"],"readwrite").objectStore("groups").delete(e);s.onsuccess=()=>{r()},s.onerror=()=>{var e;a(Error(`Failed to delete group: ${(null==(e=s.error)?void 0:e.message)||"Unknown error"}`))}})},i=async(e,t,r)=>{let s=await a();return new Promise((a,n)=>{let o=s.transaction(["images"],"readwrite").objectStore("images"),l={groupId:e,name:t,blob:r,createdAt:new Date().toISOString()},i=o.add(l);i.onsuccess=()=>{a(i.result)},i.onerror=()=>{var e;n(Error(`Failed to add image: ${(null==(e=i.error)?void 0:e.message)||"Unknown error"}`))}})},c=async e=>{let t=await a();return new Promise((r,a)=>{let s=t.transaction(["images"],"readonly").objectStore("images").index("groupId").getAll(e);s.onsuccess=()=>{r(s.result)},s.onerror=()=>{var e;a(Error(`Failed to get images: ${(null==(e=s.error)?void 0:e.message)||"Unknown error"}`))}})},d=async(e,t)=>{let r=await a();return new Promise((a,s)=>{let n=r.transaction(["images"],"readwrite").objectStore("images"),o=n.get(e);o.onsuccess=()=>{let r=o.result;if(!r)return void s(Error(`Image with ID ${e} not found`));r.name=t;let l=n.put(r);l.onsuccess=()=>{a()},l.onerror=()=>{var e;s(Error(`Failed to rename image: ${(null==(e=l.error)?void 0:e.message)||"Unknown error"}`))}},o.onerror=()=>{var e;s(Error(`Failed to get image: ${(null==(e=o.error)?void 0:e.message)||"Unknown error"}`))}})},u=async e=>{let t=await a();return new Promise((r,a)=>{let s=t.transaction(["images"],"readwrite").objectStore("images").delete(e);s.onsuccess=()=>{r()},s.onerror=()=>{var e;a(Error(`Failed to delete image: ${(null==(e=s.error)?void 0:e.message)||"Unknown error"}`))}})},m=async e=>{let t=await a();return new Promise((r,a)=>{let s=t.transaction(["images"],"readwrite").objectStore("images").index("groupId").openCursor(e);s.onsuccess=e=>{let t=e.target.result;t?(t.delete(),t.continue()):r()},s.onerror=()=>{var e;a(Error(`Failed to delete images: ${(null==(e=s.error)?void 0:e.message)||"Unknown error"}`))}})}}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return s[e](r,r.exports,o),r.exports}o.m=s,o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=[],o.O=(t,r,a,s)=>{if(r){s=s||0;for(var n=e.length;n>0&&e[n-1][2]>s;n--)e[n]=e[n-1];e[n]=[r,a,s];return}for(var l=1/0,n=0;n<e.length;n++){for(var[r,a,s]=e[n],i=!0,c=0;c<r.length;c++)(!1&s||l>=s)&&Object.keys(o.O).every(e=>o.O[e](r[c]))?r.splice(c--,1):(i=!1,s<l&&(l=s));if(i){e.splice(n--,1);var d=a();void 0!==d&&(t=d)}}return t},t={410:0},o.O.j=e=>0===t[e],r=(e,r)=>{var a,s,[n,l,i]=r,c=0;if(n.some(e=>0!==t[e])){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var d=i(o)}for(e&&e(r);c<n.length;c++)s=n[c],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(d)},(a=self.webpackChunksimple_cosplay_plan_profile=self.webpackChunksimple_cosplay_plan_profile||[]).forEach(r.bind(null,0)),a.push=r.bind(null,a.push.bind(a));var l=o.O(void 0,["783"],()=>o(389));l=o.O(l)})();